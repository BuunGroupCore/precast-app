import { Router } from 'express';
import { toNodeHandler } from 'better-auth/node';
import { auth } from '@/features/auth/auth{{#if typescript}}.js{{/if}}';

/**
 * Better Auth routes for Express
 * Uses toNodeHandler for proper request handling
 */
const authRouter = Router();

/**
 * Handle all Better Auth endpoints
 * When mounted at /api/auth, this will handle /api/auth/*
 * The '*' pattern catches all routes including /ok, /signin, etc.
 */
authRouter.all('*', toNodeHandler(auth));

export default authRouter;