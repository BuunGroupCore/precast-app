import { defineConfig } from 'drizzle-kit';
{{#unless typescript}}import { config } from 'dotenv';{{/unless}}
{{#if typescript}}import { config } from 'dotenv';{{/if}}

config();

/**
 * Drizzle configuration
 * @description Configuration for Drizzle Kit migrations and schema management
 */
export default defineConfig({
  schema: './src/db/schema.{{#if typescript}}ts{{else}}js{{/if}}',
  out: './drizzle',
  {{#if (eq database "postgres")}}
  dialect: 'postgresql',
  {{else if (eq database "mysql")}}
  dialect: 'mysql',
  {{else if (eq database "sqlite")}}
  dialect: 'sqlite',
  {{/if}}
  dbCredentials: {
    {{#if (eq database "postgres")}}
    url: process.env.DATABASE_URL{{#if typescript}}!{{else}} || ''{{/if}},
    {{else if (eq database "mysql")}}
    url: process.env.DATABASE_URL{{#if typescript}}!{{else}} || ''{{/if}},
    {{else if (eq database "sqlite")}}
    url: process.env.DATABASE_URL || './sqlite.db',
    {{/if}}
  },
  verbose: true,
  strict: true,
});