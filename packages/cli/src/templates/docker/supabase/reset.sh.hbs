#!/bin/bash

# Reset script for {{name}} Supabase Docker environment
# This script completely resets your local Supabase instance

echo "🔄 Resetting {{name}} Supabase Docker environment..."

# Stop all services
echo "📦 Stopping all services..."
docker-compose --env-file .env down

# Remove all containers, networks, images, and volumes
echo "🧹 Cleaning up containers, networks, and volumes..."
docker-compose --env-file .env down -v --remove-orphans

# Remove any dangling images
echo "🗑️ Removing dangling images..."
docker image prune -f

# Restart the services
echo "🚀 Starting services..."
docker-compose --env-file .env up -d

echo "✅ Reset complete!"
echo ""
echo "🌟 Your {{name}} Supabase instance has been completely reset."
echo "📊 Supabase Studio: http://localhost:3000"
echo "🔗 API Gateway: http://localhost:8000"
echo "💾 Direct Database: localhost:5432"
echo ""
echo "Run 'npm run docker:logs' to see the startup logs."