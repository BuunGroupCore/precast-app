#!/bin/bash

# Reset script for {{name}} Supabase Docker environment
# This script completely resets your local Supabase instance

echo "ğŸ”„ Resetting {{name}} Supabase Docker environment..."

# Stop all services
echo "ğŸ“¦ Stopping all services..."
docker-compose --env-file .env down

# Remove all containers, networks, images, and volumes
echo "ğŸ§¹ Cleaning up containers, networks, and volumes..."
docker-compose --env-file .env down -v --remove-orphans

# Remove any dangling images
echo "ğŸ—‘ï¸ Removing dangling images..."
docker image prune -f

# Restart the services
echo "ğŸš€ Starting services..."
docker-compose --env-file .env up -d

echo "âœ… Reset complete!"
echo ""
echo "ğŸŒŸ Your {{name}} Supabase instance has been completely reset."
echo "ğŸ“Š Supabase Studio: http://localhost:3000"
echo "ğŸ”— API Gateway: http://localhost:8000"
echo "ğŸ’¾ Direct Database: localhost:5432"
echo ""
echo "Run 'npm run docker:logs' to see the startup logs."